{"ast":null,"code":"var _jsxFileName = \"D:\\\\Projects\\\\React\\\\PTT-react\\\\client\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport './App.css';\nimport { useEffect, useState } from 'react';\nimport { MediaPresenter, AudioStreamer, Media } from 'sfmediastream';\nimport io from 'socket.io-client';\nimport Hold from './sounds/Hold.mp3';\nimport Transmit from './sounds/transmit.mp3'; // const socket = io.connect(\"http://localhost:9000\");\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const channelInput = document.getElementById(\"channel-input\");\n  let audio = null;\n  const [socket, setSocket] = useState(null);\n  const [state, setState] = useState('');\n  const [message, setMessage] = useState('');\n  const [id, setId] = useState('');\n  const [channel, setChannel] = useState(localStorage.getItem('channel'));\n  const [isWarning, setIsWarning] = useState(false);\n  const [warningMessage, setWarningMessage] = useState('');\n  const [volume, setVolume] = useState(0.5);\n  const presenterMedia = new MediaPresenter({\n    audio: {\n      channelCount: 1,\n      echoCancellation: true,\n      noiseSuppression: true\n    }\n  }, 250);\n  const audioStreamer = new AudioStreamer(Audio, 1000);\n  const gainNode = Media.audioContext.createGain();\n  audioStreamer.connect(gainNode);\n  gainNode.connect(Media.audioContext.destination);\n  useEffect(() => {\n    if (localStorage.getItem('channel') === null) {\n      localStorage.setItem('channel', 3000);\n    }\n\n    setChannel(localStorage.getItem('channel'));\n  }, []);\n  useEffect(() => {\n    gainNode.gain.value = volume;\n  }, [gainNode.gain, volume]);\n  useEffect(() => {\n    if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {\n      console.log(\"enumerateDevices() not supported.\");\n      setIsWarning(true);\n      setWarningMessage('enumerateDevices() not supported.');\n      return;\n    } else {\n      navigator.mediaDevices.enumerateDevices().then(devices => {\n        const inputList = [];\n        devices.forEach(device => {\n          if (device.kind === 'audioinput') {\n            inputList.push(device);\n          }\n\n          ;\n        });\n\n        if (inputList.length === 0) {\n          setIsWarning(true);\n          setWarningMessage('Recorder device not found!');\n        } else {\n          setIsWarning(false);\n          setWarningMessage('');\n        }\n      });\n    }\n\n    ;\n  }, []);\n  useEffect(() => {\n    var newSocket = io.connect(\"http://localhost:9000\");\n    setSocket(newSocket);\n    return () => socket.close();\n  }, [socket]);\n  socket.on('connect', () => {\n    socket.emit('join-room', channel);\n    setState('Idle');\n    setId(socket.id);\n    console.log(`You are connected with socketID: ${socket.id} in Channel: ${channel}`);\n  });\n  socket.on('connect_error', error => {\n    setState('Connection-lost');\n    setIsWarning(true);\n    setWarningMessage('Connection lost!');\n    console.log(\"Socket Error: \" + error);\n    socket.disconnect();\n    socket.close();\n    socket.removeAllListeners();\n    setTimeout(() => {\n      setState('Reconnecting');\n      setWarningMessage('Reconnecting..');\n      socket.connect();\n    }, 2000);\n  });\n  socket.on('receive-sos', id => {\n    setState('Incoming-SOS');\n    setMessage(`S.O.S from: ${id}`);\n    audioStreamer.playStream();\n  });\n  socket.on('receive-sos-end', () => {\n    setState('Idle');\n    setMessage('');\n    audioStreamer.stop();\n  });\n  socket.on('receive-voice-message', id => {\n    setState('Incoming-Broadcast');\n    setMessage(id);\n    audioStreamer.playStream();\n  });\n  socket.on('receive-voice-message-end', () => {\n    setState('Idle');\n    setMessage('');\n    audioStreamer.stop();\n  });\n  socket.on('bufferHeader', data => {\n    audioStreamer.setBufferHeader(data);\n  });\n  socket.on('stream', data => {\n    console.log(\"Buffer received: \" + data[0].byteLength + \"bytes\");\n    audioStreamer.realtimeBufferPlay(data);\n  });\n\n  function handleChangeChannel() {\n    if (channelInput.value === '' || state === 'Connection-lost' || state === 'Reconnecting') return;\n    let prevChannel = channel;\n    let newChannel = channelInput.value;\n    localStorage.setItem('channel', newChannel);\n    setChannel(newChannel);\n    socket.emit('change-room', prevChannel, newChannel);\n    channelInput.value = '';\n    channelInput.blur();\n  }\n\n  ;\n\n  function onSosClick() {\n    if (state === 'Connection-lost' || state === 'Reconnecting') {\n      audio = new Audio(Hold);\n      audio.volume = volume;\n      audio.play();\n    } else {\n      setState('SOS-Sent');\n      setMessage('SOS Sent');\n      socket.emit('sos-start', id, channel);\n      startRcording();\n      setTimeout(() => {\n        socket.emit('sos-end', channel);\n        stopRcording();\n        setMessage('');\n        setState('Idle');\n      }, 10000);\n    }\n\n    ;\n  }\n\n  ;\n\n  function onPttDown() {\n    if (state === 'SOS-Sent') return;\n\n    if (state === 'Connection-lost' || state === 'Reconnecting') {\n      audio = new Audio(Hold);\n      audio.volume = volume;\n      audio.play();\n    }\n\n    ;\n\n    if (state === 'Incoming-Broadcast' || state === 'Incoming-SOS') {\n      audioStreamer.stop();\n      audio = new Audio(Hold);\n      audio.volume = volume;\n      audio.play();\n      setTimeout(() => {\n        audioStreamer.playStream();\n      }, 400);\n    }\n\n    ;\n\n    if (state === 'Idle') {\n      audio = new Audio(Transmit);\n      audio.volume = volume;\n      audio.play();\n      setTimeout(() => {\n        socket.emit('voice-message-start', id, channel);\n        startRcording();\n      }, 500);\n    }\n\n    ;\n  }\n\n  ;\n\n  function onPttUp() {\n    if (state === 'SOS-Sent') return;\n    socket.emit('voice-message-end', id, channel);\n    stopRcording();\n  }\n\n  ;\n\n  function startRcording() {\n    presenterMedia.onRecordingReady = packet => {\n      console.log(\"Header size: \" + packet.data.size + \"bytes\");\n      socket.emit('bufferHeader', channel, packet);\n    };\n\n    presenterMedia.onBufferProcess = packet => {\n      console.log(\"Buffer sent: \" + packet[0].size + \"bytes\");\n      socket.emit('stream', channel, packet);\n    };\n\n    presenterMedia.startRecording();\n  }\n\n  ;\n\n  function stopRcording() {\n    presenterMedia.stopRecording();\n  }\n\n  ;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ptt\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"message-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"message-id\",\n        children: id\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"message-channel\",\n        children: channel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"message-talker\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this), isWarning && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"message-warnings\",\n        children: warningMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"channel-input-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"channel-label\",\n        htmlFor: \"channel__input\",\n        children: \"Channel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"channel-input\",\n        className: \"channel__input\",\n        autoComplete: \"off\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"channel__input-button\",\n        onClick: handleChangeChannel,\n        children: \"Join\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"buttons-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"sos-button\",\n        className: \"sos-button\",\n        type: \"button\",\n        onPointerDown: onSosClick,\n        children: \"S.O.S\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"ptt-button\",\n        className: \"ptt-button\",\n        type: \"button\",\n        onPointerDown: onPttDown,\n        onPointerUp: onPttUp,\n        children: \"PTT\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"range\",\n        id: \"volume\",\n        min: \"0\",\n        max: \"1\",\n        step: \"0.05\",\n        value: volume,\n        onChange: e => setVolume(parseFloat(e.target.value))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 237,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"Fx/GtcQS1bVWSJCl79JdJ+lQGrU=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","MediaPresenter","AudioStreamer","Media","io","Hold","Transmit","App","channelInput","document","getElementById","audio","socket","setSocket","state","setState","message","setMessage","id","setId","channel","setChannel","localStorage","getItem","isWarning","setIsWarning","warningMessage","setWarningMessage","volume","setVolume","presenterMedia","channelCount","echoCancellation","noiseSuppression","audioStreamer","Audio","gainNode","audioContext","createGain","connect","destination","setItem","gain","value","navigator","mediaDevices","enumerateDevices","console","log","then","devices","inputList","forEach","device","kind","push","length","newSocket","close","on","emit","error","disconnect","removeAllListeners","setTimeout","playStream","stop","data","setBufferHeader","byteLength","realtimeBufferPlay","handleChangeChannel","prevChannel","newChannel","blur","onSosClick","play","startRcording","stopRcording","onPttDown","onPttUp","onRecordingReady","packet","size","onBufferProcess","startRecording","stopRecording","e","parseFloat","target"],"sources":["D:/Projects/React/PTT-react/client/src/App.js"],"sourcesContent":["import './App.css';\nimport { useEffect, useState } from 'react';\nimport { MediaPresenter, AudioStreamer, Media } from 'sfmediastream';\nimport io from 'socket.io-client';\n\nimport Hold from './sounds/Hold.mp3';\nimport Transmit from './sounds/transmit.mp3';\n\n// const socket = io.connect(\"http://localhost:9000\");\n\nfunction App() {\n  const channelInput = document.getElementById(\"channel-input\");\n  let audio = null;\n\n  const [socket, setSocket] = useState(null);\n  const [state, setState] = useState('');\n  const [message, setMessage] = useState('');\n  const [id, setId] = useState('');\n  const [channel, setChannel] = useState(localStorage.getItem('channel'));\n  const [isWarning, setIsWarning] = useState(false);\n  const [warningMessage, setWarningMessage] = useState('');\n  const [volume, setVolume] = useState(0.5);\n\n  const presenterMedia = new MediaPresenter({\n    audio:{\n      channelCount: 1,\n      echoCancellation: true,\n      noiseSuppression: true,\n    }\n  }, 250);\n\n  const audioStreamer = new AudioStreamer(Audio, 1000);\n  const gainNode = Media.audioContext.createGain();\n  \n  audioStreamer.connect(gainNode);\n  gainNode.connect(Media.audioContext.destination);\n\n  useEffect(() => {\n    if (localStorage.getItem('channel') === null) {\n      localStorage.setItem('channel', 3000);\n    }\n\n    setChannel(localStorage.getItem('channel'));\n  }, []);\n\n  useEffect(() => {\n    gainNode.gain.value = volume;\n  }, [gainNode.gain, volume]);\n\n  useEffect(() => {\n    if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {\n      console.log(\"enumerateDevices() not supported.\");\n      setIsWarning(true);\n      setWarningMessage('enumerateDevices() not supported.');\n      return;\n    } else {\n      navigator.mediaDevices.enumerateDevices()\n        .then(devices => {\n          const inputList = [];\n\n          devices.forEach(device => {\n            if (device.kind === 'audioinput') {\n              inputList.push(device);\n            };\n          });\n\n          if (inputList.length === 0) {\n            setIsWarning(true);\n            setWarningMessage('Recorder device not found!');\n          } else {\n            setIsWarning(false);\n            setWarningMessage('');\n          }\n        });\n    };\n  }, []);\n\n  useEffect(() => {\n    var newSocket = io.connect(\"http://localhost:9000\");\n    setSocket(newSocket);\n    return () => socket.close();\n  }, [socket])\n\n  socket.on('connect', () => {\n    socket.emit('join-room', channel);\n    setState('Idle');\n    setId(socket.id);\n    console.log(`You are connected with socketID: ${socket.id} in Channel: ${channel}`);\n  });\n\n  socket.on('connect_error', error => {\n    setState('Connection-lost');\n    setIsWarning(true);\n    setWarningMessage('Connection lost!');\n    console.log(\"Socket Error: \" + error);\n    socket.disconnect();\n    socket.close();\n    socket.removeAllListeners();\n  \n    setTimeout(() => {\n      setState('Reconnecting');\n      setWarningMessage('Reconnecting..');\n      socket.connect();\n    }, 2000);\n  });\n\n  socket.on('receive-sos', (id) => {\n    setState('Incoming-SOS');\n    setMessage(`S.O.S from: ${id}`);\n    audioStreamer.playStream();\n  });\n  \n  socket.on('receive-sos-end', () => {\n    setState('Idle');\n    setMessage('');\n    audioStreamer.stop();\n  });\n\n  socket.on('receive-voice-message', (id) => {\n    setState('Incoming-Broadcast');\n    setMessage(id);\n    audioStreamer.playStream();\n  });\n  \n  socket.on('receive-voice-message-end', () => {\n    setState('Idle');\n    setMessage('');\n    audioStreamer.stop();\n  });\n\n  socket.on('bufferHeader', (data) => {\n    audioStreamer.setBufferHeader(data);\n  });\n  \n  socket.on('stream', (data) => {\n    console.log(\"Buffer received: \" + data[0].byteLength + \"bytes\");\n    audioStreamer.realtimeBufferPlay(data);\n  });\n\n  function handleChangeChannel() {\n    if (channelInput.value === '' || state === 'Connection-lost' || state === 'Reconnecting') return;\n\n    let prevChannel = channel;\n    let newChannel = channelInput.value;\n\n    localStorage.setItem('channel', newChannel);\n    setChannel(newChannel);\n\n    socket.emit('change-room', prevChannel, newChannel);\n    \n    channelInput.value = '';\n    channelInput.blur();\n  };\n\n  function onSosClick() {\n    if (state === 'Connection-lost' || state === 'Reconnecting') {\n      audio = new Audio(Hold);\n      audio.volume = volume;\n      audio.play();\n    } else {\n      setState('SOS-Sent');\n      setMessage('SOS Sent');\n\n      socket.emit('sos-start', id, channel);\n      startRcording();\n\n      setTimeout(() => {\n        socket.emit('sos-end', channel);\n        stopRcording();\n\n        setMessage('');\n        setState('Idle');\n      }, 10000);\n    };\n  };\n\n  function onPttDown() {\n\n    if (state === 'SOS-Sent') return;\n\n    if (state === 'Connection-lost' || state === 'Reconnecting') {\n      audio = new Audio(Hold);\n      audio.volume = volume;\n      audio.play();\n    };\n\n    if (state === 'Incoming-Broadcast' || state === 'Incoming-SOS') {\n      audioStreamer.stop();\n\n      audio = new Audio(Hold);\n      audio.volume = volume;\n      audio.play();\n\n      setTimeout(() => {\n        audioStreamer.playStream();\n      }, 400)\n    };\n\n    if (state === 'Idle') {\n      audio = new Audio(Transmit);\n      audio.volume = volume;\n      audio.play();\n\n      setTimeout(() => {\n        socket.emit('voice-message-start', id, channel);\n        startRcording();\n      }, 500);\n    };\n  };\n\n  function onPttUp() {\n    if (state === 'SOS-Sent') return;\n\n    socket.emit('voice-message-end', id, channel);\n    stopRcording();\n  };\n\n  function startRcording() {\n    presenterMedia.onRecordingReady = (packet) => {\n      console.log(\"Header size: \" + packet.data.size + \"bytes\");\n      socket.emit('bufferHeader', channel, packet);\n    };\n  \n    presenterMedia.onBufferProcess = (packet) => {\n      console.log(\"Buffer sent: \" + packet[0].size + \"bytes\");\n      socket.emit('stream', channel, packet);\n    };\n  \n    presenterMedia.startRecording();\n  };\n\n  function stopRcording() {\n    presenterMedia.stopRecording();\n  };\n\n  return (\n    <div className=\"ptt\">\n      <div className='message-container'>\n        <p className='message-id'>{id}</p>\n        <p className='message-channel'>{channel}</p>\n        <p className='message-talker'>{message}</p>\n        { isWarning &&\n            <p className='message-warnings'>{warningMessage}</p>\n        }\n      </div>\n      <div className='channel-input-container'>\n        <label className='channel-label' htmlFor='channel__input'>Channel</label>\n        <input type='text' id='channel-input' className='channel__input' autoComplete='off' />\n        <button type='submit' className='channel__input-button' onClick={handleChangeChannel}>Join</button>\n      </div>\n      <div className='buttons-container'>\n        <button id='sos-button' className='sos-button' type='button' onPointerDown={onSosClick}>S.O.S</button>\n        <button id='ptt-button' className='ptt-button' type='button' onPointerDown={onPttDown} onPointerUp={onPttUp}>PTT</button>\n        <input type='range' id='volume' min='0' max='1' step='0.05' value={volume} onChange={(e) => setVolume(parseFloat(e.target.value))} />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}